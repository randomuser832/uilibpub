local uis = game:GetService("UserInputService")
local ts = game:GetService("TweenService")
local coregui = game:GetService("CoreGui")

local library = {}
library.theme = {
    MainColor = Color3.fromRGB(30, 30, 30),
    TabColor = Color3.fromRGB(20, 20, 20),
    SectionColor = Color3.fromRGB(40, 40, 40),
    AccentColor = Color3.fromRGB(0, 255, 0),
    FontColor = Color3.fromRGB(255, 255, 255)
}

local gui = Instance.new("ScreenGui")
gui.Name = "IreXionUILib"
gui.ResetOnSpawn = false
gui.Parent = coregui

local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 450, 0, 300)
mainFrame.Position = UDim2.new(0.5, -225, 0.5, -150)
mainFrame.BackgroundColor3 = library.theme.MainColor
mainFrame.BorderSizePixel = 0
mainFrame.Parent = gui

local header = Instance.new("TextLabel")
header.Size = UDim2.new(1, 0, 0, 30)
header.BackgroundColor3 = library.theme.TabColor
header.Text = "  IreXion - UI Library"
header.TextColor3 = library.theme.FontColor
header.TextXAlignment = Enum.TextXAlignment.Left
header.Font = Enum.Font.SourceSansBold
header.TextSize = 18
header.Parent = mainFrame

local tabList = Instance.new("Frame")
tabList.Size = UDim2.new(0, 100, 1, -30)
tabList.Position = UDim2.new(0, 0, 0, 30)
tabList.BackgroundColor3 = library.theme.SectionColor
tabList.BorderSizePixel = 0
tabList.Parent = mainFrame

local contentFrame = Instance.new("Frame")
contentFrame.Size = UDim2.new(1, -100, 1, -30)
contentFrame.Position = UDim2.new(0, 100, 0, 30)
contentFrame.BackgroundColor3 = library.theme.MainColor
contentFrame.BorderSizePixel = 0
contentFrame.Parent = mainFrame

local uipadding = Instance.new("UIPadding", contentFrame)
uipadding.PaddingTop = UDim.new(0, 10)
uipadding.PaddingLeft = UDim.new(0, 10)
uipadding.PaddingRight = UDim.new(0, 10)
uipadding.PaddingBottom = UDim.new(0, 10)

local tabButtons = {}

function library:CreateTab(name)
    local tab = Instance.new("Frame")
    tab.Name = name
    tab.Size = UDim2.new(1, 0, 1, 0)
    tab.BackgroundTransparency = 1
    tab.Visible = false
    tab.Parent = contentFrame

    local layout = Instance.new("UIListLayout", tab)
    layout.Padding = UDim.new(0, 6)
    layout.SortOrder = Enum.SortOrder.LayoutOrder

    local button = Instance.new("TextButton")
    button.Size = UDim2.new(1, 0, 0, 30)
    button.Text = name
    button.BackgroundColor3 = library.theme.TabColor
    button.TextColor3 = library.theme.FontColor
    button.Font = Enum.Font.SourceSans
    button.TextSize = 16
    button.Parent = tabList

    button.MouseButton1Click:Connect(function()
        for _, other in ipairs(contentFrame:GetChildren()) do
            if other:IsA("Frame") then
                other.Visible = false
            end
        end
        tab.Visible = true
    end)

    table.insert(tabButtons, button)
    if #tabButtons == 1 then tab.Visible = true end

    return tab
end

function library:CreateButton(tab, text, callback)
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(1, 0, 0, 30)
    button.Text = text
    button.BackgroundColor3 = library.theme.SectionColor
    button.TextColor3 = library.theme.FontColor
    button.Font = Enum.Font.SourceSans
    button.TextSize = 16
    button.Parent = tab

    button.MouseButton1Click:Connect(function()
        if callback then callback() end
    end)
end

function library:CreateLabel(tab, text)
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, 0, 0, 20)
    label.Text = text
    label.BackgroundTransparency = 1
    label.TextColor3 = library.theme.FontColor
    label.Font = Enum.Font.SourceSans
    label.TextSize = 16
    label.Parent = tab
end

function library:CreateKeybind(key)
    local bind = Enum.KeyCode[key] or Enum.KeyCode.RightShift
    uis.InputBegan:Connect(function(input, gpe)
        if not gpe and input.KeyCode == bind then
            gui.Enabled = not gui.Enabled
        end
    end)
end

function library:ToggleWindow(state)
    gui.Enabled = state
end

-- === Auto Initialization ===
library:CreateKeybind("RightShift") -- Toggle visibility with RightShift

-- Example Tab Setup
local homeTab = library:CreateTab("Home")
library:CreateLabel(homeTab, "Welcome to IreXion UI!")
library:CreateButton(homeTab, "Print Hello", function()
    print("Hello from IreXion UI!")
end)

local settingsTab = library:CreateTab("Settings")
library:CreateLabel(settingsTab, "Settings Menu")
library:CreateButton(settingsTab, "Toggle Something", function()
    print("Toggled a setting.")
end)
