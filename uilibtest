local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local CoreGui = game:GetService("CoreGui")

local UI = {} -- Library table
local ToggleKey = Enum.KeyCode.LeftControl

-- Create Main GUI
local ScreenGui = Instance.new("ScreenGui", CoreGui)
ScreenGui.Name = "Tyrone_UI"
ScreenGui.ResetOnSpawn = false

-- Main frame
local Main = Instance.new("Frame", ScreenGui)
Main.Size = UDim2.new(0, 450, 0, 400)
Main.Position = UDim2.new(0.5, -225, 0.5, -200)
Main.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Main.BorderSizePixel = 0
Main.ClipsDescendants = true

-- Top bar
local TopBar = Instance.new("Frame", Main)
TopBar.Size = UDim2.new(1, 0, 0, 30)
TopBar.BackgroundColor3 = Color3.fromRGB(25, 25, 25)

local Title = Instance.new("TextLabel", TopBar)
Title.Size = UDim2.new(1, -60, 1, 0)
Title.Position = UDim2.new(0, 10, 0, 0)
Title.Text = "UI Library"
Title.TextColor3 = Color3.new(1, 1, 1)
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.BackgroundTransparency = 1
Title.Font = Enum.Font.Gotham
Title.TextSize = 16

local MinimizeButton = Instance.new("TextButton", TopBar)
MinimizeButton.Size = UDim2.new(0, 50, 0, 30)
MinimizeButton.Position = UDim2.new(1, -50, 0, 0)
MinimizeButton.Text = "_"
MinimizeButton.TextColor3 = Color3.new(1, 1, 1)
MinimizeButton.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
MinimizeButton.BorderSizePixel = 0
MinimizeButton.Font = Enum.Font.GothamBold
MinimizeButton.TextSize = 20

local TabHolder = Instance.new("Frame", Main)
TabHolder.Position = UDim2.new(0, 0, 0, 30)
TabHolder.Size = UDim2.new(0, 120, 1, -30)
TabHolder.BackgroundColor3 = Color3.fromRGB(35, 35, 35)

local PageHolder = Instance.new("Frame", Main)
PageHolder.Position = UDim2.new(0, 120, 0, 30)
PageHolder.Size = UDim2.new(1, -120, 1, -30)
PageHolder.BackgroundColor3 = Color3.fromRGB(40, 40, 40)

local Tabs = {}
local Pages = {}

function UI:CreateTab(name)
	local TabButton = Instance.new("TextButton", TabHolder)
	TabButton.Size = UDim2.new(1, 0, 0, 30)
	TabButton.Text = name
	TabButton.TextColor3 = Color3.new(1, 1, 1)
	TabButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
	TabButton.Font = Enum.Font.Gotham
	TabButton.TextSize = 14

	local Page = Instance.new("ScrollingFrame", PageHolder)
	Page.Size = UDim2.new(1, 0, 1, 0)
	Page.Visible = false
	Page.BackgroundTransparency = 1
	Page.CanvasSize = UDim2.new(0, 0, 1, 0)
	Page.ScrollBarThickness = 6
	Page.AutomaticCanvasSize = Enum.AutomaticSize.Y

	TabButton.MouseButton1Click:Connect(function()
		for _, v in pairs(Pages) do v.Visible = false end
		Page.Visible = true
	end)

	Tabs[name] = TabButton
	Pages[name] = Page
	return Page
end

-- Settings Tab
local SettingsPage = UI:CreateTab("Settings")

local KeybindLabel = Instance.new("TextLabel", SettingsPage)
KeybindLabel.Size = UDim2.new(0, 200, 0, 30)
KeybindLabel.Position = UDim2.new(0, 10, 0, 10)
KeybindLabel.Text = "Toggle Key:"
KeybindLabel.TextColor3 = Color3.new(1, 1, 1)
KeybindLabel.BackgroundTransparency = 1
KeybindLabel.Font = Enum.Font.Gotham
KeybindLabel.TextSize = 14
KeybindLabel.TextXAlignment = Enum.TextXAlignment.Left

local KeybindBox = Instance.new("TextBox", SettingsPage)
KeybindBox.Size = UDim2.new(0, 100, 0, 30)
KeybindBox.Position = UDim2.new(0, 10, 0, 50)
KeybindBox.PlaceholderText = "LeftControl"
KeybindBox.Text = ""
KeybindBox.Font = Enum.Font.Gotham
KeybindBox.TextSize = 14
KeybindBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
KeybindBox.TextColor3 = Color3.new(1, 1, 1)

KeybindBox.FocusLost:Connect(function()
	local text = KeybindBox.Text
	local foundKey = Enum.KeyCode[text]
	if foundKey then
		ToggleKey = foundKey
	else
		ToggleKey = Enum.KeyCode.LeftControl
	end
end)

-- UI Toggler
UserInputService.InputBegan:Connect(function(input, processed)
	if processed then return end
	if input.KeyCode == ToggleKey then
		Main.Visible = not Main.Visible
	end
end)

-- Minimize Logic
local Minimized = false
MinimizeButton.MouseButton1Click:Connect(function()
	Minimized = not Minimized
	if Minimized then
		Main:TweenSize(UDim2.new(0, 450, 0, 30), Enum.EasingDirection.Out, Enum.EasingStyle.Quad, 0.3, true)
	else
		Main:TweenSize(UDim2.new(0, 450, 0, 400), Enum.EasingDirection.Out, Enum.EasingStyle.Quad, 0.3, true)
	end
end)

-- Optional: Add Credits (only if user chooses)
function UI:AddCreditsTab(text)
	local page = self:CreateTab("Credits")
	local label = Instance.new("TextLabel", page)
	label.Size = UDim2.new(1, -20, 0, 60)
	label.Position = UDim2.new(0, 10, 0, 10)
	label.Text = text or "UI Made by Tyrone_darealest"
	label.Font = Enum.Font.Gotham
	label.TextSize = 14
	label.TextWrapped = true
	label.TextColor3 = Color3.new(1, 1, 1)
	label.BackgroundTransparency = 1
end

return UI
